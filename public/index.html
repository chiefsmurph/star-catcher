<html>
  <head>
    <title>Star Catcher</title>
    <meta name="viewport" content="width=device-width, initial-scale=0.8, minimum-scale=0.8, maximum-scale=0.8, user-scalable=no"/>
    <link href='https://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
    <style>
    html, body {
      overflow:hidden;
    }
    * {
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      cursor: default;
    }
    body {
      font-family: 'Audiowide', cursive;
    }
    #directions {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      text-align: center;
      padding-top: 20%;
    }
    #directions h1 {
      width: 40%;
      margin: 0 auto;
      background-color: rgba(255,255,255,0.4);
      border-radius: 10px;
      padding: 10px;
      box-shadow: 10px 10px 5px rgba(0,0,0,0.5);
    }
    #fireworks {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 140%;
      background-image: url('img/fireworks.gif');
      background-size: cover;
      z-index: 0;
      display: none;
    }
    #fireworks h1 {
      color: white;
      font-size: 1px;
      white-space: nowrap;
      -webkit-text-stroke-width: 5px;
      -webkit-text-stroke-color: orange;
    }
    #gamearea {
      background-image: url('img/sky.jpg');
      background-size: cover;
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 140%;
    }
    .star {
      position: absolute;
      width: 50px;
      height: 50px;

    }
    .fast-star {
       -webkit-animation-name: spin;
       -webkit-animation-duration: 4000ms;
       -webkit-animation-iteration-count: infinite;
       -webkit-animation-timing-function: linear;
       -moz-animation-name: spin;
       -moz-animation-duration: 4000ms;
       -moz-animation-iteration-count: infinite;
       -moz-animation-timing-function: linear;
       -ms-animation-name: spin;
       -ms-animation-duration: 4000ms;
       -ms-animation-iteration-count: infinite;
       -ms-animation-timing-function: linear;

       animation-name: spin;
       animation-duration: 4000ms;
       animation-iteration-count: infinite;
       animation-timing-function: linear;
    }
    @-ms-keyframes spin {
       from { -ms-transform: rotate(0deg); }
       to { -ms-transform: rotate(-360deg); }
    }
    @-moz-keyframes spin {
       from { -moz-transform: rotate(0deg); }
       to { -moz-transform: rotate(-360deg); }
    }
    @-webkit-keyframes spin {
       from { -webkit-transform: rotate(0deg); }
       to { -webkit-transform: rotate(-360deg); }
    }
    @keyframes spin {
       from {
           transform:rotate(0deg);
       }
       to {
           transform:rotate(360deg);
       }
    }

    #bucket {
      position: absolute;
      bottom: 10px;
      left: 10px;
      cursor: pointer;
    }
    #bucket img {
      width: 100px;
      cursor: pointer;
    }
    #bucket #top {
      z-index: 1;
    }
    #bucket #bottom {
      position: relative;
      left: -104px;
      z-index: 2;
    }
    #scoreboard {
      position: absolute;
      top: -200px;
      right: 30%;
      width: 200px;
      z-index: 10000;
      background-color: rgba(255,255,255,0.4);
      padding: 15px;
    }
    #scoreboard td {
      text-align: center;
    }
    #scoreboard td:nth-child(1) {
      /*border-right: 1px dashed black;*/
    }
    #scoreboard td:nth-child(2) {
      border-left: 2px dashed black;
    }
    #scoreboard div {
      font-size: 35px;
      margin-bottom: 5px;
      line-height: 1;
    }
    #scoreboard #starscaught {
      color: green;
    }
    #scoreboard #starsfallen {
      color: red;
    }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>

    var height, width;
    var spaceBtnDrops = 2000;
    var levelData = JSON.parse('[{"x":1,"time":941},{"x":8,"time":2399},{"x":20,"time":4096},{"x":35,"time":5759},{"x":51,"time":8153},{"x":69,"time":9817},{"x":78,"time":10399},{"x":61,"time":11367},{"x":46,"time":13029},{"x":27,"time":14585},{"x":15,"time":15545},{"x":41,"time":16423},{"x":62,"time":17735},{"x":62,"time":17985},{"x":82,"time":19199},{"x":74,"time":20413},{"x":64,"time":21485},{"x":52,"time":22905},{"x":34,"time":24023},{"x":15,"time":24675},{"x":9,"time":25153},{"x":28,"time":25569},{"x":42,"time":26660},{"x":59,"time":27931},{"x":74,"time":29831},{"x":84,"time":31379},{"x":72,"time":32437},{"x":54,"time":33825},{"x":31,"time":35429},{"x":13,"time":36826},{"x":8,"time":37336},{"x":4,"time":37800},{"x":21,"time":38458},{"x":35,"time":39617},{"x":28,"time":40970},{"x":28,"time":41452},{"x":26,"time":41713},{"x":17,"time":42584},{"x":53,"time":43123},{"x":24,"time":43690},{"x":61,"time":44192},{"x":27,"time":44688},{"x":51,"time":45198},{"x":50,"time":46234},{"x":51,"time":47756},{"x":51,"time":48856},{"x":51,"time":49590},{"x":51,"time":49852},{"x":51,"time":50056},{"x":51,"time":50315},{"x":51,"time":50536},{"x":51,"time":50803},{"x":51,"time":51068},{"x":37,"time":51469},{"x":17,"time":51792},{"x":16,"time":52066},{"x":8,"time":52404},{"x":12,"time":52781},{"x":20,"time":53055},{"x":5,"time":53298},{"x":2,"time":53566},{"x":11,"time":53824},{"x":71,"time":54900},{"x":44,"time":55756},{"x":76,"time":56278},{"x":54,"time":57302},{"x":73,"time":57836},{"x":65,"time":58423},{"x":81,"time":58965},{"x":68,"time":59666},{"x":70,"time":60623},{"x":71,"time":61730},{"x":69,"time":63095},{"x":50,"time":64995},{"x":36,"time":66210},{"x":22,"time":66621},{"x":15,"time":66967},{"x":8,"time":67327},{"x":8,"time":67571},{"x":6,"time":67853},{"x":14,"time":68111},{"x":23,"time":68332},{"x":26,"time":68617},{"x":31,"time":69007},{"x":36,"time":69375},{"x":38,"time":69745},{"x":48,"time":70146},{"x":46,"time":70516},{"x":28,"time":70787},{"x":16,"time":71209},{"x":23,"time":71579},{"x":34,"time":71996},{"x":36,"time":72567},{"x":33,"time":73684},{"x":19,"time":74287},{"x":20,"time":74641},{"x":35,"time":74976},{"x":38,"time":75450},{"x":39,"time":75768},{"x":44,"time":76293},{"x":54,"time":76786},{"x":61,"time":77501},{"x":67,"time":77941},{"x":72,"time":78485},{"x":76,"time":79065},{"x":85,"time":79424},{"x":85,"time":79857},{"x":76,"time":80125},{"x":63,"time":80384},{"x":62,"time":80603},{"x":38,"time":80847},{"x":38,"time":81059},{"x":19,"time":81372},{"x":18,"time":81592},{"x":11,"time":82864},{"x":20,"time":83994},{"x":34,"time":84675},{"x":44,"time":85620},{"x":51,"time":86609},{"x":60,"time":87403},{"x":71,"time":88250},{"x":71,"time":89020},{"x":81,"time":89710},{"x":69,"time":90908},{"x":59,"time":92207},{"x":50,"time":93487},{"x":42,"time":94898},{"x":32,"time":95864},{"x":22,"time":96790},{"x":12,"time":97670},{"x":26,"time":98580},{"x":40,"time":99750},{"x":55,"time":100574},{"x":69,"time":101446},{"x":83,"time":102334},{"x":91,"time":103077},{"x":75,"time":103794},{"x":55,"time":104594},{"x":40,"time":105239},{"x":25,"time":105850},{"x":14,"time":106541},{"x":5,"time":107146},{"x":13,"time":107852},{"x":25,"time":108311},{"x":33,"time":108634},{"x":43,"time":109041},{"x":56,"time":109386},{"x":64,"time":109849},{"x":75,"time":110140},{"x":82,"time":110392},{"x":84,"time":110706},{"x":84,"time":111052},{"x":78,"time":111285},{"x":76,"time":111483},{"x":65,"time":111797},{"x":63,"time":112149},{"x":49,"time":112441},{"x":47,"time":112801},{"x":36,"time":113131},{"x":30,"time":113515},{"x":25,"time":113853},{"x":16,"time":114081},{"x":16,"time":114313},{"x":10,"time":114559},{"x":7,"time":114740},{"x":12,"time":115094},{"x":22,"time":115587},{"x":26,"time":116265},{"x":26,"time":116508},{"x":33,"time":116745},{"x":36,"time":116924},{"x":36,"time":117104},{"x":36,"time":117303},{"x":48,"time":117467},{"x":48,"time":117613},{"x":61,"time":117947},{"x":62,"time":118140},{"x":62,"time":118331},{"x":69,"time":118575},{"x":69,"time":118793},{"x":75,"time":119025},{"x":78,"time":119411},{"x":78,"time":119627},{"x":67,"time":120117},{"x":66,"time":120397},{"x":51,"time":120745},{"x":51,"time":120953},{"x":41,"time":121153},{"x":39,"time":121347},{"x":11,"time":122500},{"x":23,"time":122899},{"x":39,"time":123355},{"x":40,"time":123693},{"x":59,"time":123992},{"x":63,"time":124276},{"x":70,"time":124749},{"x":76,"time":125031},{"x":76,"time":125324},{"x":58,"time":125699},{"x":57,"time":126035},{"x":42,"time":126397},{"x":42,"time":126625},{"x":26,"time":126924},{"x":26,"time":127197},{"x":21,"time":127481},{"x":50,"time":127760},{"x":55,"time":128183},{"x":52,"time":128379},{"x":38,"time":128655},{"x":37,"time":128880},{"x":22,"time":129197},{"x":24,"time":129493},{"x":47,"time":129745},{"x":48,"time":129977},{"x":60,"time":130327},{"x":61,"time":130561},{"x":71,"time":130979},{"x":71,"time":131246},{"x":72,"time":131514},{"x":76,"time":131837},{"x":83,"time":132096},{"x":83,"time":132795},{"x":76,"time":133541},{"x":69,"time":134305},{"x":69,"time":135209},{"x":55,"time":135508},{"x":55,"time":135682},{"x":55,"time":135851},{"x":55,"time":136033},{"x":31,"time":136215},{"x":31,"time":136344},{"x":31,"time":136656},{"x":12,"time":136861},{"x":11,"time":137038},{"x":11,"time":137244},{"x":12,"time":137403},{"x":13,"time":137733},{"x":21,"time":137969},{"x":21,"time":138110},{"x":31,"time":138806},{"x":32,"time":139619},{"x":47,"time":140144},{"x":54,"time":140761},{"x":65,"time":141394},{"x":71,"time":142061},{"x":82,"time":142732},{"x":86,"time":143540},{"x":92,"time":144271},{"x":63,"time":146309},{"x":39,"time":146872},{"x":17,"time":147572},{"x":38,"time":148198},{"x":17,"time":148745},{"x":29,"time":149238},{"x":17,"time":149797},{"x":7,"time":150196},{"x":39,"time":150660},{"x":46,"time":151108},{"x":35,"time":151612},{"x":25,"time":152198},{"x":52,"time":152856},{"x":68,"time":153463},{"x":79,"time":153908},{"x":88,"time":154458},{"x":94,"time":154984},{"x":86,"time":155966},{"x":71,"time":157276},{"x":63,"time":158641},{"x":53,"time":159979},{"x":18,"time":161329},{"x":71,"time":162332},{"x":17,"time":163360},{"x":79,"time":164726},{"x":11,"time":166090},{"x":83,"time":167396},{"x":1,"time":169068},{"x":91,"time":170533},{"x":88,"time":171508},{"x":93,"time":172167},{"x":6,"time":173281},{"x":79,"time":174211},{"x":22,"time":174703},{"x":0,"time":175239},{"x":70,"time":175803},{"x":15,"time":176275},{"x":57,"time":176777},{"x":33,"time":177405},{"x":70,"time":177875},{"x":49,"time":178465},{"x":82,"time":178983},{"x":89,"time":179550},{"x":68,"time":180051},{"x":47,"time":180435},{"x":28,"time":180953},{"x":22,"time":181557},{"x":12,"time":182021},{"x":2,"time":182484},{"x":49,"time":182949},{"x":31,"time":183513},{"x":20,"time":183991},{"x":54,"time":184455},{"x":68,"time":184933},{"x":78,"time":185553},{"x":87,"time":186133},{"x":62,"time":186701},{"x":42,"time":187555},{"x":23,"time":188663},{"x":9,"time":189809},{"x":36,"time":190875},{"x":21,"time":192013},{"x":11,"time":192727},{"x":27,"time":193653},{"x":40,"time":194651},{"x":40,"time":194858},{"x":40,"time":195188},{"x":40,"time":195463},{"x":40,"time":195642},{"x":40,"time":195808},{"x":76,"time":196710},{"x":76,"time":196886},{"x":76,"time":197052},{"x":76,"time":197202},{"x":76,"time":197485},{"x":76,"time":197601},{"x":76,"time":197742},{"x":76,"time":198024},{"x":76,"time":198174},{"x":76,"time":198449},{"x":48,"time":199322},{"x":48,"time":199484},{"x":48,"time":199632},{"x":48,"time":199774},{"x":48,"time":199909},{"x":48,"time":200052},{"x":21,"time":200859},{"x":21,"time":201035},{"x":21,"time":201182},{"x":21,"time":201332},{"x":21,"time":201496},{"x":21,"time":201624},{"x":12,"time":202552},{"x":12,"time":202730},{"x":12,"time":202887},{"x":12,"time":203169},{"x":12,"time":203326},{"x":12,"time":203482},{"x":12,"time":203618},{"x":12,"time":203930},{"x":12,"time":204096},{"x":12,"time":204236},{"x":12,"time":204448},{"x":12,"time":204598},{"x":12,"time":204770},{"x":12,"time":204935},{"x":47,"time":205619},{"x":22,"time":206066},{"x":75,"time":206466},{"x":65,"time":207392},{"x":84,"time":208074},{"x":68,"time":208736},{"x":73,"time":209416},{"x":73,"time":209612},{"x":64,"time":210558},{"x":47,"time":210966},{"x":66,"time":211641},{"x":82,"time":212458},{"x":90,"time":212976},{"x":92,"time":213682},{"x":95,"time":214350},{"x":86,"time":214977},{"x":95,"time":215448},{"x":89,"time":215818},{"x":92,"time":216304},{"x":93,"time":216594},{"x":76,"time":216814},{"x":73,"time":217018},{"x":91,"time":217308},{"x":89,"time":217661},{"x":68,"time":217943},{"x":40,"time":218503},{"x":76,"time":218831},{"x":83,"time":219309},{"x":51,"time":219687},{"x":22,"time":220244},{"x":16,"time":220521},{"x":58,"time":220834},{"x":63,"time":221156},{"x":24,"time":221429},{"x":23,"time":221674},{"x":36,"time":222040},{"x":36,"time":222284},{"x":44,"time":222482},{"x":48,"time":222662},{"x":49,"time":223015},{"x":50,"time":223291},{"x":50,"time":223463},{"x":50,"time":223614},{"x":50,"time":223897},{"x":66,"time":224190},{"x":66,"time":224375},{"x":66,"time":224491},{"x":66,"time":224672},{"x":46,"time":224949},{"x":45,"time":225177},{"x":40,"time":225356},{"x":40,"time":225554},{"x":26,"time":225710},{"x":26,"time":225979},{"x":20,"time":226176},{"x":20,"time":226363},{"x":1,"time":226543},{"x":1,"time":226739},{"x":8,"time":226913},{"x":11,"time":227097},{"x":20,"time":227297},{"x":20,"time":227497},{"x":30,"time":227674},{"x":34,"time":227865},{"x":35,"time":228055},{"x":37,"time":228225},{"x":39,"time":228429},{"x":39,"time":228611},{"x":46,"time":228823},{"x":50,"time":229032},{"x":52,"time":229245},{"x":52,"time":229459},{"x":54,"time":229663},{"x":60,"time":229883},{"x":66,"time":230120},{"x":92,"time":231943},{"x":92,"time":231944},{"x":92,"time":232164},{"x":67,"time":232479},{"x":67,"time":232681},{"x":49,"time":233019},{"x":49,"time":233247},{"x":30,"time":233483},{"x":30,"time":233699},{"x":18,"time":234065},{"x":18,"time":234284},{"x":34,"time":234567},{"x":41,"time":234841},{"x":42,"time":235203},{"x":46,"time":236090},{"x":61,"time":236843},{"x":72,"time":237541},{"x":83,"time":238279},{"x":65,"time":239106},{"x":43,"time":239708},{"x":27,"time":240635},{"x":16,"time":241733},{"x":8,"time":242919},{"x":23,"time":243901},{"x":11,"time":244764},{"x":24,"time":245809},{"x":35,"time":246649},{"x":44,"time":247608},{"x":54,"time":248422},{"x":59,"time":249152},{"x":71,"time":249875},{"x":75,"time":250801},{"x":84,"time":251616},{"x":91,"time":252214},{"x":91,"time":252552},{"x":78,"time":252992},{"x":62,"time":253439},{"x":52,"time":253838},{"x":32,"time":254303},{"x":30,"time":254646},{"x":19,"time":254923},{"x":18,"time":255176},{"x":38,"time":255442},{"x":45,"time":255628},{"x":46,"time":255832},{"x":46,"time":256006},{"x":56,"time":256611},{"x":62,"time":256869},{"x":72,"time":257222},{"x":80,"time":257810},{"x":88,"time":258393},{"x":91,"time":259082},{"x":91,"time":260104},{"x":91,"time":261227},{"x":91,"time":262584},{"x":91,"time":263470},{"x":85,"time":264394},{"x":73,"time":265194},{"x":90,"time":265790},{"x":81,"time":266340},{"x":91,"time":266794},{"x":92,"time":267479},{"x":94,"time":267964},{"x":95,"time":269129},{"x":91,"time":269714},{"x":81,"time":270248},{"x":86,"time":270704},{"x":60,"time":271284},{"x":40,"time":271670},{"x":39,"time":271896},{"x":52,"time":272163},{"x":42,"time":272745},{"x":26,"time":273199},{"x":54,"time":273530},{"x":42,"time":273953},{"x":23,"time":274290},{"x":14,"time":274614},{"x":54,"time":274903},{"x":59,"time":275226},{"x":29,"time":275789},{"x":19,"time":276074},{"x":15,"time":276429},{"x":40,"time":276739},{"x":61,"time":277062},{"x":71,"time":277635},{"x":76,"time":278045},{"x":37,"time":278413},{"x":16,"time":278836},{"x":18,"time":279141},{"x":60,"time":279487},{"x":22,"time":279747},{"x":46,"time":280169},{"x":43,"time":280443},{"x":14,"time":280730},{"x":34,"time":281113},{"x":40,"time":281404},{"x":7,"time":281741},{"x":70,"time":282164},{"x":32,"time":282557},{"x":52,"time":282893},{"x":61,"time":283163},{"x":26,"time":283601},{"x":8,"time":284009},{"x":8,"time":284321},{"x":59,"time":284676},{"x":32,"time":285147},{"x":38,"time":285467},{"x":59,"time":285783},{"x":68,"time":286175},{"x":82,"time":286519},{"x":86,"time":286849},{"x":49,"time":287188},{"x":22,"time":287595},{"x":1,"time":287996},{"x":21,"time":288333},{"x":31,"time":288687},{"x":10,"time":289065},{"x":30,"time":289345},{"x":41,"time":289801},{"x":56,"time":290381},{"x":68,"time":290665},{"x":79,"time":291134},{"x":85,"time":291505},{"x":61,"time":292109},{"x":51,"time":292453},{"x":30,"time":292877},{"x":11,"time":293325},{"x":10,"time":293701},{"x":36,"time":294211},{"x":15,"time":294632},{"x":5,"time":295014},{"x":3,"time":295367},{"x":22,"time":295734},{"x":23,"time":296083},{"x":39,"time":296421},{"x":43,"time":296792},{"x":16,"time":297143},{"x":11,"time":297622},{"x":43,"time":297953},{"x":54,"time":298337},{"x":66,"time":298941},{"x":67,"time":299249},{"x":80,"time":299671},{"x":79,"time":299899},{"x":55,"time":300143},{"x":48,"time":300328},{"x":41,"time":300706},{"x":31,"time":301038},{"x":31,"time":301253},{"x":30,"time":301495},{"x":23,"time":301856},{"x":23,"time":302074},{"x":4,"time":302405},{"x":4,"time":302600},{"x":4,"time":302768},{"x":14,"time":302954},{"x":14,"time":303096},{"x":19,"time":303253},{"x":19,"time":303411},{"x":21,"time":303588},{"x":24,"time":303770},{"x":26,"time":303960},{"x":26,"time":304143},{"x":27,"time":304323},{"x":29,"time":304511},{"x":33,"time":304702},{"x":42,"time":304895},{"x":48,"time":305072},{"x":48,"time":305256},{"x":49,"time":305417},{"x":55,"time":305608},{"x":55,"time":305786},{"x":57,"time":305984},{"x":57,"time":306163},{"x":61,"time":306342},{"x":61,"time":306523},{"x":66,"time":306712},{"x":69,"time":306892},{"x":71,"time":307084},{"x":59,"time":310742},{"x":60,"time":310984},{"x":69,"time":311261},{"x":72,"time":311484},{"x":72,"time":311684},{"x":81,"time":312280},{"x":83,"time":313018},{"x":54,"time":313286},{"x":39,"time":313622},{"x":23,"time":313920},{"x":19,"time":314180},{"x":5,"time":314585},{"x":4,"time":314853},{"x":33,"time":315196},{"x":34,"time":315536},{"x":22,"time":315856},{"x":15,"time":316122},{"x":7,"time":316382},{"x":45,"time":316688},{"x":45,"time":316962},{"x":11,"time":317269},{"x":-3,"time":317668},{"x":10,"time":318124},{"x":24,"time":318424},{"x":28,"time":318814},{"x":32,"time":319052},{"x":26,"time":319295},{"x":20,"time":319622},{"x":9,"time":319928},{"x":4,"time":320212},{"x":2,"time":320486},{"x":1,"time":320706},{"x":-2,"time":320910},{"x":-2,"time":321130},{"x":1,"time":321352},{"x":6,"time":321554},{"x":13,"time":321782},{"x":20,"time":322190},{"x":20,"time":322410},{"x":15,"time":322614},{"x":9,"time":322836},{"x":4,"time":323124},{"x":12,"time":323406},{"x":20,"time":323798},{"x":25,"time":324128},{"x":25,"time":324312},{"x":25,"time":324494},{"x":40,"time":324987},{"x":40,"time":325159},{"x":38,"time":325599},{"x":28,"time":325844},{"x":28,"time":326088},{"x":16,"time":326285},{"x":10,"time":326606},{"x":9,"time":326864},{"x":8,"time":327203},{"x":7,"time":327571},{"x":29,"time":327891},{"x":40,"time":328299},{"x":40,"time":328503},{"x":41,"time":328716},{"x":49,"time":328943},{"x":49,"time":329322},{"x":49,"time":329604},{"x":49,"time":330172},{"x":49,"time":330416},{"x":21,"time":330855},{"x":21,"time":331105},{"x":15,"time":331326},{"x":8,"time":331677},{"x":8,"time":331834},{"x":8,"time":331997},{"x":8,"time":332179},{"x":8,"time":332329},{"x":15,"time":332528},{"x":15,"time":332695},{"x":16,"time":332879},{"x":16,"time":333037},{"x":20,"time":333209},{"x":20,"time":333389},{"x":21,"time":333568},{"x":23,"time":333769},{"x":24,"time":333924},{"x":24,"time":334092},{"x":29,"time":334263},{"x":29,"time":334456},{"x":32,"time":334615},{"x":32,"time":334783},{"x":34,"time":334946},{"x":35,"time":335127},{"x":36,"time":335314},{"x":37,"time":335498},{"x":37,"time":335677},{"x":38,"time":335879},{"x":40,"time":336171},{"x":41,"time":336392},{"x":44,"time":336593},{"x":46,"time":336791},{"x":46,"time":336978},{"x":47,"time":337187},{"x":47,"time":337357},{"x":49,"time":337543},{"x":49,"time":337733},{"x":51,"time":337956},{"x":53,"time":338187},{"x":56,"time":338379},{"x":56,"time":338554},{"x":58,"time":338755},{"x":59,"time":338967},{"x":60,"time":339181},{"x":64,"time":339383},{"x":66,"time":339568},{"x":67,"time":339747},{"x":67,"time":339968},{"x":46,"time":340177},{"x":36,"time":340400},{"x":12,"time":340743},{"x":7,"time":341097},{"x":23,"time":341466},{"x":30,"time":341927},{"x":36,"time":342446},{"x":38,"time":342929},{"x":42,"time":343433},{"x":46,"time":343823},{"x":49,"time":344304},{"x":53,"time":344690},{"x":61,"time":345081},{"x":67,"time":345489},{"x":72,"time":345906},{"x":76,"time":346313},{"x":86,"time":346717},{"x":92,"time":347156},{"x":94,"time":347643},{"x":93,"time":348017},{"x":89,"time":348270},{"x":89,"time":348467},{"x":74,"time":348756},{"x":65,"time":348972},{"x":58,"time":349188},{"x":44,"time":349379},{"x":42,"time":349595},{"x":36,"time":349815},{"x":34,"time":350022},{"x":19,"time":350245},{"x":14,"time":350461},{"x":8,"time":350693},{"x":5,"time":351092},{"x":0,"time":351427},{"x":6,"time":352035},{"x":13,"time":352757},{"x":20,"time":353494},{"x":26,"time":354185},{"x":35,"time":354915},{"x":40,"time":355469},{"x":51,"time":356142},{"x":55,"time":356678},{"x":67,"time":357337},{"x":72,"time":357856},{"x":83,"time":358422},{"x":87,"time":358858},{"x":82,"time":360848},{"x":66,"time":361353},{"x":50,"time":361791},{"x":30,"time":362286},{"x":10,"time":362756},{"x":10,"time":363117},{"x":46,"time":363446},{"x":47,"time":363774},{"x":58,"time":364271},{"x":63,"time":364546},{"x":65,"time":364787},{"x":65,"time":364958},{"x":70,"time":365260},{"x":70,"time":365478},{"x":76,"time":366132},{"x":47,"time":366912},{"x":15,"time":368026},{"x":31,"time":369750},{"x":72,"time":371439},{"x":12,"time":372852},{"x":33,"time":374182},{"x":20,"time":375136},{"x":8,"time":376380},{"x":31,"time":377372},{"x":4,"time":378056},{"x":57,"time":378852},{"x":54,"time":380584},{"x":87,"time":381522},{"x":73,"time":382286},{"x":59,"time":382502},{"x":52,"time":382884},{"x":25,"time":383085},{"x":16,"time":383528},{"x":0,"time":383824},{"x":6,"time":384131},{"x":14,"time":384339},{"x":22,"time":384524},{"x":32,"time":384678},{"x":32,"time":384846},{"x":43,"time":385027},{"x":61,"time":385740},{"x":75,"time":386421},{"x":84,"time":387861},{"x":72,"time":388888},{"x":90,"time":390321},{"x":56,"time":390819},{"x":56,"time":391145},{"x":68,"time":391333},{"x":70,"time":391530},{"x":55,"time":391701},{"x":40,"time":391938},{"x":76,"time":392229},{"x":26,"time":392496},{"x":20,"time":394099},{"x":20,"time":394269},{"x":39,"time":394633},{"x":66,"time":395663},{"x":68,"time":395829},{"x":50,"time":396069},{"x":50,"time":396249},{"x":81,"time":397871},{"x":75,"time":398013},{"x":65,"time":398159},{"x":64,"time":398351},{"x":36,"time":399659},{"x":36,"time":399825},{"x":21,"time":399967},{"x":7,"time":401457},{"x":7,"time":401599},{"x":18,"time":401733},{"x":33,"time":401867},{"x":33,"time":401997},{"x":40,"time":402141},{"x":49,"time":402273},{"x":52,"time":402447},{"x":33,"time":403896},{"x":22,"time":404656},{"x":42,"time":405427},{"x":14,"time":405975},{"x":36,"time":406455},{"x":15,"time":407004},{"x":37,"time":407459},{"x":14,"time":407875},{"x":30,"time":408221},{"x":13,"time":408574},{"x":27,"time":408934},{"x":2,"time":409219},{"x":18,"time":409508},{"x":19,"time":409705},{"x":1,"time":409909},{"x":20,"time":410175},{"x":16,"time":410427},{"x":6,"time":410716},{"x":23,"time":411015},{"x":14,"time":411274},{"x":27,"time":411494},{"x":24,"time":411674},{"x":12,"time":411871},{"x":40,"time":412074},{"x":32,"time":412311},{"x":24,"time":412499},{"x":61,"time":412742},{"x":51,"time":412969},{"x":25,"time":413142},{"x":62,"time":413338},{"x":69,"time":413542},{"x":37,"time":413730},{"x":64,"time":414076},{"x":64,"time":414292},{"x":68,"time":414483},{"x":72,"time":414688},{"x":74,"time":414917},{"x":76,"time":415159},{"x":64,"time":415386},{"x":56,"time":415582},{"x":48,"time":415929},{"x":45,"time":416149},{"x":38,"time":416368},{"x":38,"time":416810},{"x":68,"time":417109},{"x":68,"time":417336},{"x":30,"time":417550},{"x":29,"time":417812},{"x":0,"time":418050},{"x":14,"time":418654},{"x":14,"time":418850},{"x":35,"time":419028},{"x":35,"time":419188},{"x":61,"time":419391},{"x":63,"time":419598},{"x":77,"time":420877},{"x":77,"time":420878},{"x":83,"time":421476},{"x":85,"time":421696},{"x":85,"time":421892},{"x":81,"time":422096},{"x":68,"time":422316},{"x":68,"time":422496},{"x":55,"time":422670},{"x":42,"time":422840},{"x":41,"time":423054},{"x":31,"time":423290},{"x":31,"time":423516},{"x":20,"time":423751},{"x":18,"time":423981},{"x":13,"time":424230},{"x":7,"time":424481},{"x":7,"time":424717},{"x":6,"time":425070},{"x":2,"time":425368},{"x":2,"time":425580},{"x":15,"time":425808},{"x":15,"time":426028},{"x":19,"time":426222},{"x":19,"time":426396},{"x":30,"time":426600},{"x":30,"time":426796},{"x":35,"time":426994},{"x":36,"time":427194},{"x":41,"time":427396},{"x":43,"time":427562},{"x":45,"time":427756},{"x":50,"time":427940},{"x":51,"time":428140},{"x":60,"time":428568},{"x":64,"time":429227},{"x":68,"time":430028},{"x":68,"time":430401},{"x":78,"time":430852},{"x":87,"time":431567},{"x":89,"time":432378},{"x":93,"time":432956},{"x":91,"time":433426},{"x":82,"time":433701},{"x":77,"time":434118},{"x":71,"time":434462},{"x":52,"time":434903},{"x":43,"time":435257},{"x":22,"time":435785},{"x":17,"time":436080},{"x":7,"time":436552},{"x":1,"time":437226},{"x":21,"time":437676},{"x":22,"time":437952},{"x":35,"time":438296},{"x":44,"time":438652},{"x":55,"time":439073},{"x":64,"time":439491},{"x":76,"time":439913},{"x":85,"time":440309},{"x":85,"time":440645},{"x":83,"time":441141},{"x":72,"time":441346},{"x":72,"time":441518},{"x":53,"time":441746},{"x":51,"time":441978},{"x":48,"time":442170},{"x":41,"time":442439},{"x":34,"time":442655},{"x":32,"time":442863},{"x":27,"time":443088},{"x":21,"time":443312},{"x":18,"time":443519},{"x":8,"time":443765},{"x":3,"time":444327},{"x":3,"time":444695},{"x":19,"time":445093},{"x":44,"time":445415},{"x":48,"time":445787},{"x":63,"time":446035},{"x":63,"time":446241},{"x":76,"time":446453},{"x":76,"time":446631},{"x":83,"time":446837},{"x":84,"time":447063},{"x":89,"time":447316},{"x":89,"time":447543},{"x":80,"time":447788},{"x":69,"time":448003},{"x":67,"time":448212},{"x":43,"time":448427},{"x":38,"time":448653},{"x":24,"time":448883},{"x":22,"time":449113},{"x":8,"time":449377},{"x":8,"time":449620},{"x":6,"time":449847},{"x":14,"time":450373},{"x":27,"time":450599},{"x":38,"time":451441},{"x":53,"time":452311},{"x":69,"time":453471},{"x":82,"time":454659},{"x":67,"time":455625},{"x":60,"time":456777},{"x":51,"time":458085},{"x":35,"time":459122},{"x":15,"time":460761},{"x":12,"time":463054},{"x":12,"time":465107},{"x":12,"time":467542},{"x":12,"time":469902},{"x":16,"time":471442},{"x":27,"time":472046},{"x":10,"time":472873},{"x":3,"time":473753},{"x":15,"time":475553},{"x":34,"time":476251},{"x":57,"time":477112},{"x":71,"time":477760},{"x":87,"time":478434},{"x":94,"time":479180},{"x":84,"time":480586},{"x":64,"time":481110},{"x":39,"time":481724},{"x":79,"time":482288},{"x":34,"time":482820},{"x":12,"time":483316},{"x":1,"time":483834},{"x":46,"time":484942},{"x":54,"time":485468},{"x":65,"time":485969},{"x":85,"time":486975},{"x":94,"time":488214},{"x":88,"time":489141},{"x":60,"time":489948},{"x":68,"time":490491},{"x":81,"time":490820},{"x":50,"time":491361},{"x":33,"time":491887},{"x":18,"time":492672},{"x":10,"time":493079},{"x":32,"time":493552},{"x":45,"time":493952},{"x":59,"time":494509},{"x":77,"time":494925},{"x":90,"time":495477},{"x":83,"time":496025},{"x":54,"time":496477},{"x":29,"time":496933},{"x":10,"time":497373},{"x":6,"time":497813},{"x":35,"time":498349},{"x":44,"time":498903},{"x":54,"time":499479},{"x":52,"time":500049},{"x":82,"time":500433},{"x":82,"time":500701},{"x":59,"time":500993},{"x":47,"time":501281},{"x":37,"time":501513},{"x":26,"time":501815},{"x":18,"time":502477},{"x":12,"time":502939},{"x":6,"time":503233},{"x":4,"time":503513},{"x":8,"time":503741},{"x":16,"time":503967},{"x":17,"time":504173},{"x":27,"time":504365},{"x":29,"time":504541},{"x":33,"time":504713},{"x":36,"time":504919},{"x":56,"time":505119},{"x":61,"time":505319},{"x":64,"time":505497},{"x":70,"time":505711},{"x":61,"time":505923},{"x":47,"time":506145},{"x":41,"time":506360},{"x":28,"time":506561},{"x":21,"time":506775},{"x":21,"time":506953},{"x":11,"time":507167},{"x":25,"time":507363},{"x":37,"time":507567},{"x":12,"time":507765},{"x":11,"time":507945},{"x":33,"time":508147},{"x":33,"time":508367},{"x":78,"time":509765},{"x":78,"time":509766},{"x":57,"time":510087},{"x":40,"time":510827},{"x":40,"time":511021},{"x":34,"time":511332},{"x":34,"time":511521},{"x":49,"time":511719},{"x":69,"time":511913},{"x":84,"time":512113},{"x":85,"time":512298},{"x":68,"time":512497},{"x":60,"time":512672},{"x":60,"time":512865},{"x":83,"time":513085},{"x":60,"time":513281},{"x":48,"time":513475},{"x":47,"time":513673},{"x":26,"time":513878},{"x":26,"time":514073},{"x":6,"time":514270},{"x":4,"time":514459},{"x":11,"time":514674},{"x":19,"time":514875},{"x":33,"time":515072},{"x":45,"time":515267},{"x":56,"time":515475},{"x":57,"time":515687},{"x":40,"time":515888},{"x":40,"time":516087},{"x":26,"time":516297},{"x":26,"time":516487},{"x":24,"time":516699},{"x":22,"time":516899},{"x":42,"time":517123},{"x":43,"time":517315},{"x":87,"time":518613},{"x":87,"time":518614},{"x":87,"time":518908},{"x":87,"time":519088},{"x":62,"time":519536},{"x":62,"time":519724},{"x":59,"time":519916},{"x":41,"time":520134},{"x":41,"time":520333},{"x":20,"time":520546},{"x":20,"time":520786},{"x":12,"time":520984},{"x":12,"time":521192},{"x":16,"time":521384},{"x":31,"time":521576},{"x":33,"time":521771},{"x":59,"time":521961},{"x":61,"time":522168},{"x":72,"time":522360},{"x":77,"time":522560},{"x":77,"time":522750},{"x":59,"time":522950},{"x":59,"time":523154},{"x":47,"time":523368},{"x":47,"time":523554},{"x":36,"time":523908},{"x":35,"time":524122},{"x":21,"time":524764},{"x":21,"time":524917},{"x":21,"time":525076},{"x":49,"time":525240},{"x":49,"time":525394},{"x":60,"time":525586},{"x":61,"time":525772},{"x":62,"time":525964},{"x":74,"time":526172},{"x":76,"time":526380},{"x":86,"time":526622},{"x":89,"time":526841},{"x":79,"time":527080},{"x":75,"time":527270},{"x":58,"time":527502},{"x":45,"time":527695},{"x":29,"time":527918},{"x":23,"time":528110},{"x":9,"time":528334},{"x":6,"time":528535},{"x":3,"time":528726},{"x":5,"time":528939},{"x":21,"time":529149},{"x":22,"time":529360},{"x":28,"time":529558},{"x":41,"time":529784},{"x":41,"time":529975},{"x":26,"time":530176},{"x":13,"time":530417},{"x":23,"time":531868},{"x":23,"time":532032},{"x":24,"time":532372},{"x":45,"time":532747},{"x":45,"time":532910},{"x":42,"time":533118},{"x":33,"time":533310},{"x":1,"time":533518},{"x":-1,"time":533718},{"x":-1,"time":533932},{"x":14,"time":534152},{"x":30,"time":534398},{"x":34,"time":534631},{"x":54,"time":534834},{"x":54,"time":535038},{"x":72,"time":535258},{"x":71,"time":535465},{"x":64,"time":535672},{"x":44,"time":535921},{"x":39,"time":536112},{"x":27,"time":536350},{"x":19,"time":536544},{"x":19,"time":536745},{"x":49,"time":536968},{"x":49,"time":537174},{"x":75,"time":537392},{"x":81,"time":537590},{"x":81,"time":537781},{"x":70,"time":538004},{"x":63,"time":538196},{"x":41,"time":538444},{"x":17,"time":538650},{"x":4,"time":538866},{"x":4,"time":539086},{"x":25,"time":539304},{"x":25,"time":539524},{"x":52,"time":539750},{"x":54,"time":539965},{"x":71,"time":540183},{"x":74,"time":540410},{"x":71,"time":540649},{"x":71,"time":540928},{"x":59,"time":541300},{"x":59,"time":541501},{"x":88,"time":541704},{"x":88,"time":541901},{"x":87,"time":542136},{"x":87,"time":542334},{"x":77,"time":542520},{"x":77,"time":542721},{"x":61,"time":542900},{"x":48,"time":543283},{"x":48,"time":543488},{"x":40,"time":543686},{"x":38,"time":543891},{"x":22,"time":544102},{"x":10,"time":544333},{"x":9,"time":544604},{"x":4,"time":544851},{"x":5,"time":545085},{"x":27,"time":545310},{"x":32,"time":545555},{"x":35,"time":545776},{"x":45,"time":546008},{"x":57,"time":546259},{"x":57,"time":546486},{"x":58,"time":546734},{"x":59,"time":546984},{"x":63,"time":547193},{"x":66,"time":547501},{"x":72,"time":547814},{"x":74,"time":548071},{"x":77,"time":548317},{"x":71,"time":548614},{"x":45,"time":548823},{"x":33,"time":549013},{"x":15,"time":549222},{"x":18,"time":549421},{"x":29,"time":549633},{"x":58,"time":550024},{"x":67,"time":550227},{"x":67,"time":550425},{"x":73,"time":550659},{"x":79,"time":550903},{"x":80,"time":551130},{"x":82,"time":551367},{"x":83,"time":551641},{"x":90,"time":551982},{"x":86,"time":552193},{"x":86,"time":552392},{"x":76,"time":552561},{"x":76,"time":552729},{"x":64,"time":552917},{"x":64,"time":553080},{"x":37,"time":553287},{"x":37,"time":553451},{"x":35,"time":553618},{"x":28,"time":553802},{"x":28,"time":553969},{"x":24,"time":554141},{"x":47,"time":555971},{"x":47,"time":557643},{"x":47,"time":559378}]');
    var timeouts = [];
    var inGame = false;
    var starStartY = -50;

    var starX, starY, bucketPos;

    var dropStar = function(x) {
      var starEl = $('<img src="img/golden-star.svg.png" class="star">');

      x = (x) ? width * x / 100 : Math.round(Math.random() * (width-50) );
      starEl.css('left', x + 'px' );
      starEl.css('top', starStartY + 'px');
      $('#gamearea').append(starEl);

      var duration = 1000 + Math.round(Math.random() * 2000);
      if (duration < 1500) {
        starEl.addClass('fast-star');
      }

      starEl.velocity({top: height}, {
        easing: "linear",
        duration: duration,
        progress: function(elements, complete, remaining, start, tweenValue) {



          // check for bucket catch
          starX = parseInt(elements[0].style.left);
          starY = parseInt(elements[0].style.top);

          // console.log(starX, starY, bucketPos)

          if (starY > height - 10 - 86 - 10) {
            if (starX > bucketPos - 30 && starX < bucketPos + 100) {

              $(this).velocity('stop');
              $(this).remove();
              $('#starscaught').text(parseInt($('#starscaught').text()) + 1);
              if ($('#starscaught').text() === '1000') {
                gameWinner();
              }
            }
          }


        },
        complete: function() {
          if (inGame) {
            $('#starsfallen').text(parseInt($('#starsfallen').text()) + 1);
          }
          $(this).remove();
        }
      });
    }

    var gameWinner = function() {

      inGame = false;

      for (var i=0; i<timeouts.length; i++) {
        clearTimeout(timeouts[i]);
      }

      $('body').append('<div id="fireworks"><h1></h1></div>').hide().fadeIn();
      $('#bucket').hide();

      setTimeout(function() {

        $('#fireworks h1').text('Congratulations');
        $('#fireworks h1').velocity({fontSize: '1000px'}, 6000, 'easeInCubic', function() {
          $('#fireworks h1').text('1000 Points!!!!!');
          $('#fireworks h1').css('font-size', '1px');
          $('#fireworks h1').velocity({fontSize: '2000px'}, 6000, 'easeInCubic', function() {
            setTimeout(function() {
              $('#fireworks').fadeOut('slow', function() {
                $('#bucket').show();
                startGame();
                $('#fireworks').remove();
              });
            }, 2000);
          });
        });

      }, 1500);

    };

    var startGame = function() {

      $('#starscaught').text('0');
      $('#starsfallen').text('0');

      // handle levelData
      levelData.forEach(function(star) {
        timeouts.push(setTimeout(function() {
          dropStar(star.x);
        }, star.time));
      });

      inGame = true;
    };

    $(function() {

      height = $(window).height();
      width = $(window).width();

      // (function startStars() {
      //   dropStar();
      //   if (spaceBtnDrops > 100) spaceBtnDrops *= 0.97;
      //   //console.log(spaceBtnDrops);
      //   setTimeout(startStars, spaceBtnDrops);
      // })();

    });

    $(window).resize(function() {
      height = $(window).height();
      width = $(window).width();
    });


    $(document).ready(function() {

        $(window).bind(
          'touchmove',
           function(e) {
            e.preventDefault();
          }
        );

        var $dragging = null;


        if ('ontouchstart' in document.documentElement) {
          starStartY = -200;

          $(document.body).on("touchstart", "#bucket", function (e) {
              $dragging = $('#bucket');
              if (!inGame) {
                $('#directions').fadeOut('slow', function() {
                  $('#scoreboard').velocity({top: '10px'}, 2000);
                  startGame();
                });
              }
          });

          $(document.body).on("touchmove", function(e) {
              if ($dragging) {
                  $dragging.css({
                      left: e.originalEvent.touches[0].pageX-50
                  });
                  console.log('b4' + bucketPos);
                  bucketPos = e.originalEvent.touches[0].pageX-50;
                  console.log('af' + bucketPos);
              }
          });

        } else {

          $(document.body).on("mousedown", "#bucket", function (e) {
              $dragging = ($dragging) ? null : $('#bucket');
              if (!inGame) {
                $('#directions').fadeOut('slow', function() {
                  $('#scoreboard').velocity({top: '10px'}, 2000, function() {
                    startGame();
                  });
                });
              }
          });

          $(document.body).on("mousemove", function(e) {
              if ($dragging) {
                  $dragging.css({
                      left: e.pageX - 50
                  });
                  console.log('b4' + bucketPos);
                  bucketPos = e.pageX-50;
                  console.log('af' + bucketPos);
              }
          });

        }

        // $(document.body).on("mouseup", function (e) {
        //     if ($dragging) $dragging = null;
        // });

        $('img').on('dragstart', function(event) { event.preventDefault(); });
    });
    </script>

  </head>
  <body>

    <div id="gamearea">

      <div id="scoreboard">
        <table>
          <tr>
            <td>
              <div id="starscaught">0</div>
              stars caught
            </td>
            <td>
              <div id="starsfallen">0</div>
              stars fallen
            </td>
          </tr>
        </table>
      </div>
      <div id="bucket">
        <img src="img/topbucket.png" id="top">
        <img src="img/bottombucket.png" id="bottom">
      </div>
    </div>

    <!-- <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script> -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script> -->



    <script src="js/velocity.min.js"></script>

    <!-- GSAP -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/TweenLite.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/easing/EasePack.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/jquery.gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/plugins/CSSPlugin.min.js"></script> -->

    <div id="directions">
      <h1>welcome to Star Catcher<br>click the bucket to start</h1>
    </div>
  </body>
</html>
